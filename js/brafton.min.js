function submit_domains(){var e=$("#domain-delete").find("input");$.ajax({type:"POST",url:"formhandlers/errors.php",data:$("#domain-delete").serialize(),success:function(t){var i=$("#domain-delete input.switch-input").length,a=$("#total_clients").html(),n=a-i;$("#total_clients").html(n),$("#domain-delete input.switch-input").map(function(e,t){$(this).detach()}),e.map(function(e,t){var i=$(this).val(),a=Number($("[id='"+i+"']").find(".this-domains-errors").html());if(!isNaN(a)){var n=Number($("#total_errors").html()),r=1*n-1*a;$("#total_errors").html(r)}var o=$("[id='"+i+"']");o.find("input.switch-input").detach(),o.find("span.garbage").detach();var l=o.css("height");o.css("max-height",l),$("[id='"+i+"']").addClass("delete"),$("[id='"+i+"']").animate({opacity:.01},3e3,function(e){$(this).toggle()})})}})}function displayMessage(e,t,i){if($("[id='"+t+"']").length<1){var a=document.createElement("p"),n=document.createTextNode(i);a.className=e+" "+t,a.id=t,a.appendChild(n),$("#delete-notice").append(a),$("#submit-error-deletion").css({backgroundColor:"#DC5551"})}}function setscrolling(){maxscroll=($("article.master-display").length-4)*$("article.master-display").outerWidth()}function new_importer(){if("add"==$('input[name="act"]').val()){var e=$('input[name="system"]').val();e=e.replace(/\s/g,"").toLowerCase(),$.ajax({url:"classes/database/tables/plugin_creation.php",content:document.body,type:"POST",data:"plugin="+e}).done(function(e){return"success"!=e?(alert("There was an error adding a Table to the database"+e),!1):void $(".administration-settings-form").submit()})}}function check_vals(){for(var e=$("input"),t=0;t<e.length;++t){if(void 0==$(e[t]).val()||""==$(e[t]).val()){if("PASSWORD"==$(e[t]).attr("name"))continue;return alert("All Text fields must be filled out to continue"),$(e[t]).css({backgroundColor:"red"}),!1}$(e[t]).css({backgroundColor:"white"})}for(var i=$("select"),t=0;t<i.length;++t){if(void 0==$(i[t]).val()||""==$(i[t]).val())return alert("All Select Drop Downs must be filled out to continue"),$(i[t]).css({backgroundColor:"red"}),!1;$(i[t]).css({backgroundColor:"white"})}return!0}$(document).ready(function(){$(".administration-settings-form").find('input[type="submit"]').click(function(e){e.preventDefault(),"update"==$('input[name="act"]').val()||"edit"==$('input[name="act"]').val()?$(".administration-settings-form").submit():"add"==$('input[name="act"]').val()?new_importer():alert("There appears to be an error.  Please contact your system admin.")}),$("#go-left").click(function(e){var t=$("#overflow-container").find("article").outerWidth();0!=parseInt($("#overflow-container").css("right"))&&$("#overflow-container").animate({right:"+="+t+"px"})}),$("#go-right").click(function(e){var t=$("#overflow-container").find("article").outerWidth();parseInt($("#overflow-container").css("right"))!=-1*maxscroll&&$("#overflow-container").animate({right:"-="+t+"px"})}),$("article.master-display").map(function(e,t){setDisplays=function(e){var t=$(".version-container").outerWidth(),i=t/4-2.25;$(e).css("background-image");$(e).css({minWidth:"210px",maxWidth:i+"px"})},setDisplays(t),$(window).resize(function(){$("article.master-display").map(function(e,t){setDisplays(t)})}),setscrolling()}),$(".instructions").click(function(e){var t=$(this).attr("class").split(" "),i=t[1],a=new Date;a.setTime(a.getTime()+2592e3);var n="; expires="+a.toGMTString();document.cookie=i+"=disable"+n+"; path=/",$("."+i).css({display:"none"}),e.stopPropagation()}),$(".error_list").map(function(e,t){var i=$(window).height(),a=$(this),n=a.find(".error_listing");a.css({visibility:"hidden",display:"block"});var r=n.outerHeight(),o=(i-r)/2;a.css({visibility:"visible",display:"none"});var l=o+"px 12.5%";n.css({margin:l})}),$("span.domain-select input").click(function(e){var t=$(this),i=t.val();$('<div class="pop_up"></div>').appendTo("body").html("<span><h4>"+i+"</h4>Errors</span>").dialog({modal:!0,title:"How would you like to Proceed for?",text:"delete for",autoOpen:!0,width:"auto",resizable:!1,draggable:!1,dialogClass:"pop_up",width:350,height:225,show:{effect:"scale"},buttons:[{text:"Delete Now",click:function(e){fun="now",$(this).dialog("close")}},{text:"Delete After",click:function(e){fun="delay",$(this).dialog("close")}},{text:"Un Selecting",click:function(e){fun="unselect",t.attr("checked",!1),e.stopImmediatePropagation(),$(this).dialog("close")}}],open:function(e,t){$(".body").toggle("fade"),$(".ui-dialog-titlebar-close",t.dialog|t).hide()},close:function(e,t){$(".body").toggle("fade"),"now"==fun?$("#mass_delete").trigger("click"):"delay"==fun}})}),$(".error_cont").click(function(e){$("body").toggleClass("no-scroll"),$(this).find("div.error_list").slideToggle("slow",function(e){var t=$(this).find(".error_listing");t.click(function(e){e.stopPropagation()})})}),$('select[name="sort"]').change(function(e){$("form#sorting-form").submit()}),$(".delete-individual-error").click(function(e){var t=$(this).attr("data-error"),i=$(".deletion-marked"),a=i.map(function(e,t){return $(this).val()}),n=$.inArray(t,a);if(-1!==n)i[n].remove();else{var r=document.createElement("input");r.name="error-id[]",r.type="hidden",r.className="deletion-marked",r.value=t,$("form#delete-items").append(r)}displayMessage("warning","delete-individual-notice","Individual Errors have been marked for deletion")}),$("#submit-error-deletion").click(function(e){$("#mass_delete").trigger("click"),$("#delete-items").submit()}),$("#mass_delete").click(function(e){$(".domain-select input:checked").clone().appendTo("#domain-delete"),submit_domains()}),$(".expand").click(function(e){var t=$(this).attr("id"),i=t;t=t.toLowerCase(),$.ajax({url:"details.php?plugin="+t,content:document.body}).done(function(e){var t="."+i+"-table",a=$(t).css("background-image");$(".importer-details").html(e);var n=$(window).height(),r=$(".importer-details-container"),o=r.find(".importer-details");r.css({visibility:"hidden",display:"block"});var l=o.outerHeight(),s=(n-l)/2;r.css({visibility:"visible",display:"none"});var c=s+"px 12.5%";o.css({margin:c,backgroundImage:a}),$(".importer-details-container").toggle()})}),$(".add-field").click(function(e){var t='<fieldset class="aField"><label><span>Field Name</span><input type="text" name="fieldName[]"></label><label><span>Default Value</span><input type="text" name="fieldValue[]"></label></fieldset>';$("#new_fields").append(t)}),$("select.system").change(function(e){var t=$(this).val();$(location).attr("href",window.location.href+"&plugin="+t)}),$(".importer-details").click(function(e){e.stopPropagation()}),$(".popUp-info").click(function(e){$(this).toggle()}),$(".garbage").click(function(e){var t=$(this).attr("class").split(" ");t=t.filter(function(e){return""!=e?e:void 0});var i=t.length>1?!0:!1,a=$(this).attr("id"),a=a.substring(a.indexOf("-")+1),n=this;$.ajax({url:"/formhandlers/garbage_logging.php",content:document.body,type:"POST",data:"garbage_log="+a}).done(function(e){"success"==e?(console.log(i),i?$(n).removeClass("identified"):$(n).addClass("identified")):console.log(e)}),e.stopImmediatePropagation()}),$("#clean_garbage").click(function(e){var t=$(".garbage.identified"),i=[];t.map(function(e){console.log(e);var t=$(this).attr("id").substring($(this).attr("id").indexOf("-")+1);i.push(t)}),console.log(i);var a=JSON.stringify(i);console.log(a),$.ajax({url:"/formhandlers/garbage.php",content:document.body,type:"POST",data:"garbage="+a}).done(function(e){return"success"!=e?(alert("There was an error clearing out all known garbage"),console.log(e),!1):void window.location.reload()})})});